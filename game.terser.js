(()=>{function t(t,n){let i=t.i.t();for(let e of n)e(t,i);return i}function n(...n){return(i,e)=>{16&i.i.o[e]||(i.i.o[e]|=16,i.i.l[e]={l:[]});let o=i.i.l[e].l;for(let e of n){let n=t(i,e);o.push(n)}}}function*i(t,n,e){if((t.o[n]&e)===e&&(yield n),16&t.o[n])for(let o of t.l[n].l)yield*i(t,o,e)}function e(t,n){if(16&t.o[n])for(let i of t.l[n].l)e(t,i);t.u(n)}function o(t,n,i){switch(n){case 0:document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen();break;case 1:{let[n]=i;e(t.i,n),t.h++;break}case 2:t.v++}}function r(t,n,i){let e=t.createProgram();return t.attachShader(e,l(t,35633,n)),t.attachShader(e,l(t,35632,i)),t.linkProgram(e),e}function l(t,n,i){let e=t.createShader(n);return t.shaderSource(e,i),t.compileShader(e),e}function s(t,n,i){return Math.max(t,Math.min(n,i))}function c(t,n,i,e){return t[0]=n,t[1]=i,t[2]=e,t}function a(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function f(t,n,i){return t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function u(t,n,i){return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t}function h(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function d(t,n){let i=n[0],e=n[1],o=n[2],r=i*i+e*e+o*o;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function v(t,n,i){let e=n[0],o=n[1],r=n[2],l=i[3]*e+i[7]*o+i[11]*r+i[15]||1;return t[0]=(i[0]*e+i[4]*o+i[8]*r+i[12])/l,t[1]=(i[1]*e+i[5]*o+i[9]*r+i[13])/l,t[2]=(i[2]*e+i[6]*o+i[10]*r+i[14])/l,t}function _(t,n,i){let e=n[0],o=n[1],r=n[2];return t[0]=i[0]*e+i[4]*o+i[8]*r,t[1]=i[1]*e+i[5]*o+i[9]*r,t[2]=i[2]*e+i[6]*o+i[10]*r,t}function m(t,n,i,e){let o=n[0],r=n[1],l=n[2];return t[0]=o+e*(i[0]-o),t[1]=r+e*(i[1]-r),t[2]=l+e*(i[2]-l),t}function g(t,n,i,e,o){return t[0]=n,t[1]=i,t[2]=e,t[3]=o,t}function M(t,n,i){let e=n[0],o=n[1],r=n[2],l=n[3],s=i[0],c=i[1],a=i[2],f=i[3];return t[0]=e*f+l*s+o*a-r*c,t[1]=o*f+l*c+r*s-e*a,t[2]=r*f+l*a+e*c-o*s,t[3]=l*f-e*s-o*c-r*a,t}function p(t,n,i,e){let o=Math.sin(n/2*rn),r=Math.cos(n/2*rn),l=Math.sin(i/2*rn),s=Math.cos(i/2*rn),c=Math.sin(e/2*rn),a=Math.cos(e/2*rn);return t[0]=o*s*a+r*l*c,t[1]=r*l*a-o*s*c,t[2]=r*s*c-o*l*a,t[3]=r*s*a+o*l*c,t}function w(t){return 57.29577951308232*Math.asin(-s(-1,1,2*(t[1]*t[2]-t[3]*t[0])))}function y(t,n,i){let e=i/2;return t[0]=Math.sin(e)*n[0],t[1]=Math.sin(e)*n[1],t[2]=Math.sin(e)*n[2],t[3]=Math.cos(e),t}function b(t,n,i,e){let o,r,l,s,c,a=n[0],f=n[1],u=n[2],h=n[3],d=i[0],v=i[1],_=i[2],m=i[3];return r=a*d+f*v+u*_+h*m,r<0&&(r=-r,d=-d,v=-v,_=-_,m=-m),1-r>1e-6?(o=Math.acos(r),l=Math.sin(o),s=Math.sin((1-e)*o)/l,c=Math.sin(e*o)/l):(s=1-e,c=e),t[0]=s*a+c*d,t[1]=s*f+c*v,t[2]=s*u+c*_,t[3]=s*h+c*m,t}function A(t,n,i){let e=t.i._[n],o=t.i.m[n];if(o.g){let t=o.M[o.g];t&&t!==o.p&&(0===o.p.A?o.p=t:1&o.p.k&&(o.p.A=0,o.p=t)),o.g=void 0}let r=null,l=null;for(let t of o.p.C){if(o.p.A<t.D){l=t;break}r=t}if(r&&l){let i=(o.p.A-r.D)/(l.D-r.D);l.T&&(i=l.T(i)),r.F&&l.F&&(m(e.F,r.F,l.F,i),t.i.o[n]|=256),r.$&&l.$&&(b(e.$,r.$,l.$,i),t.i.o[n]|=256),r.P&&l.P&&(m(e.P,r.P,l.P,i),t.i.o[n]|=256)}let s=o.p.A+i;if(s<o.p.S)o.p.A=s;else{if(o.p.A=0,4&o.p.k)for(let t of o.p.C.reverse())t.D=o.p.S-t.D;2&o.p.k||(o.p=o.M.idle)}}function k(t,n){let i=n[0],e=n[1],o=n[2],r=n[3],l=n[4],s=n[5],c=n[6],a=n[7],f=n[8],u=n[9],h=n[10],d=n[11],v=n[12],_=n[13],m=n[14],g=n[15],M=i*s-e*l,p=i*c-o*l,w=i*a-r*l,y=e*c-o*s,b=e*a-r*s,A=o*a-r*c,k=f*_-u*v,C=f*m-h*v,E=f*g-d*v,x=u*m-h*_,D=u*g-d*_,T=h*g-d*m,F=M*T-p*D+w*x+y*E-b*C+A*k;return F?(F=1/F,t[0]=(s*T-c*D+a*x)*F,t[1]=(o*D-e*T-r*x)*F,t[2]=(_*A-m*b+g*y)*F,t[3]=(h*b-u*A-d*y)*F,t[4]=(c*E-l*T-a*C)*F,t[5]=(i*T-o*E+r*C)*F,t[6]=(m*w-v*A-g*p)*F,t[7]=(f*A-h*w+d*p)*F,t[8]=(l*D-s*E+a*k)*F,t[9]=(e*E-i*D-r*k)*F,t[10]=(v*b-_*w+g*M)*F,t[11]=(u*w-f*b-d*M)*F,t[12]=(s*C-l*x-c*k)*F,t[13]=(i*x-e*C+o*k)*F,t[14]=(_*p-v*y-m*M)*F,t[15]=(f*y-u*p+h*M)*F,t):null}function C(t,n,i){let e=n[0],o=n[1],r=n[2],l=n[3],s=n[4],c=n[5],a=n[6],f=n[7],u=n[8],h=n[9],d=n[10],v=n[11],_=n[12],m=n[13],g=n[14],M=n[15],p=i[0],w=i[1],y=i[2],b=i[3];return t[0]=p*e+w*s+y*u+b*_,t[1]=p*o+w*c+y*h+b*m,t[2]=p*r+w*a+y*d+b*g,t[3]=p*l+w*f+y*v+b*M,p=i[4],w=i[5],y=i[6],b=i[7],t[4]=p*e+w*s+y*u+b*_,t[5]=p*o+w*c+y*h+b*m,t[6]=p*r+w*a+y*d+b*g,t[7]=p*l+w*f+y*v+b*M,p=i[8],w=i[9],y=i[10],b=i[11],t[8]=p*e+w*s+y*u+b*_,t[9]=p*o+w*c+y*h+b*m,t[10]=p*r+w*a+y*d+b*g,t[11]=p*l+w*f+y*v+b*M,p=i[12],w=i[13],y=i[14],b=i[15],t[12]=p*e+w*s+y*u+b*_,t[13]=p*o+w*c+y*h+b*m,t[14]=p*r+w*a+y*d+b*g,t[15]=p*l+w*f+y*v+b*M,t}function E(t,n,i,e){let o=n[0],r=n[1],l=n[2],s=n[3],c=o+o,a=r+r,f=l+l,u=o*c,h=o*a,d=o*f,v=r*a,_=r*f,m=l*f,g=s*c,M=s*a,p=s*f,w=e[0],y=e[1],b=e[2];return t[0]=(1-(v+m))*w,t[1]=(h+p)*w,t[2]=(d-M)*w,t[3]=0,t[4]=(h-p)*y,t[5]=(1-(u+m))*y,t[6]=(_+g)*y,t[7]=0,t[8]=(d+M)*b,t[9]=(_-g)*b,t[10]=(1-(u+v))*b,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function x(t,n,i,e,o,r,l){let s=1/(o-i),c=1/(e-n),a=1/(r-l);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*a,t[11]=0,t[12]=(o+i)*s,t[13]=(n+e)*c,t[14]=(l+r)*a,t[15]=1,t}function D(t,n){return t[0]=n[8],t[1]=n[9],t[2]=n[10],d(t,t)}function T(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function F(t,n){let i=function(t,n){let i=n[4],e=n[5],o=n[6],r=n[8],l=n[9],s=n[10];return t[0]=Math.hypot(n[0],n[1],n[2]),t[1]=Math.hypot(i,e,o),t[2]=Math.hypot(r,l,s),t}([0,0,0],n),e=1/i[0],o=1/i[1],r=1/i[2],l=n[0]*e,s=n[1]*o,c=n[2]*r,a=n[4]*e,f=n[5]*o,u=n[6]*r,h=n[8]*e,d=n[9]*o,v=n[10]*r,_=l+f+v,m=0;return _>0?(m=2*Math.sqrt(_+1),t[3]=.25*m,t[0]=(u-d)/m,t[1]=(h-c)/m,t[2]=(s-a)/m):l>f&&l>v?(m=2*Math.sqrt(1+l-f-v),t[3]=(u-d)/m,t[0]=.25*m,t[1]=(s+a)/m,t[2]=(h+c)/m):f>v?(m=2*Math.sqrt(1+f-l-v),t[3]=(h-c)/m,t[0]=(s+a)/m,t[1]=.25*m,t[2]=(u+d)/m):(m=2*Math.sqrt(1+v-l-f),t[3]=(s-a)/m,t[0]=(h+c)/m,t[1]=(u+d)/m,t[2]=.25*m),t}function $(t,n){let i=t[12]-n[0],e=t[13]-n[1],o=t[14]-n[2];return i*i+e*e+o*o}function P(t,n){let i=t.i._[n];var e,o;T(an,i.i),D(fn,i.i),(e=un)[0]=(o=i.i)[4],e[1]=o[5],e[2]=o[6],d(e,e);let r=t.Audio.listener;r.positionX?(r.positionX.value=an[0],r.positionY.value=an[1],r.positionZ.value=an[2],r.forwardX.value=fn[0],r.forwardY.value=fn[1],r.forwardZ.value=fn[2],r.upX.value=un[0],r.upY.value=un[1],r.upZ.value=un[2]):(r.setPosition(...an),r.setOrientation(...fn,...un))}function S(t=0,n=1){return((hn=16807*hn%2147483647)-1)/2147483646*(n-t)+t}function O(t,n,i,e,o){let r=t.currentTime+o,l=0;n&&n.connect(t.destination);let s,c,a=t.createGain();if(a.gain.value=(i[0]/9)**3,i[5]&&(c=t.createOscillator(),c.type=i[5],c.frequency.value=(i[7]/3)**3,s=t.createGain(),s.gain.value=(i[6]+3)**3,c.connect(s)),i[1]){let e=t.createBiquadFilter();e.type=i[1],e.frequency.value=2**i[2],e.Q.value=i[3]**1.5,s&&i[4]&&s.connect(e.detune),a.connect(e),e.connect(n||t.destination)}else a.connect(n||t.destination);for(let n of i[8]){let i=t.createGain();i.connect(a);let o=(n[1]/9)**3,c=(n[2]/9)**3,f=(n[3]/9)**3,u=c+f+(n[4]/6)**3;if(i.gain.setValueAtTime(0,r),i.gain.linearRampToValueAtTime(o,r+c),i.gain.setValueAtTime(o,r+c+f),i.gain.exponentialRampToValueAtTime(1e-5,r+u),n[0]){let o=t.createOscillator();o.type=n[0],o.connect(i),o.detune.value=3*(n[5]-7.5)**3,s&&n[6]&&s.connect(o.detune);let l=440*2**((e-69)/12);if(n[7]){let t=(n[8]/9)**3,i=(n[9]/9)**3,e=(n[10]/6)**3;o.frequency.linearRampToValueAtTime(0,r),o.frequency.linearRampToValueAtTime(l,r+t),o.frequency.setValueAtTime(l,r+t+i),o.frequency.exponentialRampToValueAtTime(1e-5,r+t+i+e)}else o.frequency.setValueAtTime(l,r);o.start(r),o.stop(r+u)}else{let n=t.createBufferSource();n.buffer=R(t),n.loop=!0,n.connect(i),n.start(r),n.stop(r+u)}u>l&&(l=u)}c&&(c.start(r),c.stop(r+l))}function R(t){if(!zt){let n=(zt=t.createBuffer(1,2*t.sampleRate,t.sampleRate)).getChannelData(0);for(let t=0;t<n.length;t++)n[t]=2*Math.random()-1}return zt}function z(t,n,i){let e=t.i.O[n],o=t.i._[n];if(e.p&&(e.A+=i,e.A>e.p.R?e.p=void 0:e.I&&I(e.I,o)),e.g&&!e.p){switch(e.g.G){case 0:!function(t,n,i){let e=t.createBufferSource();e.buffer=i.K,n?(e.connect(n),n.connect(t.destination)):e.connect(t.destination),e.start()}(t.Audio,e.I,e.g);break;case 1:!function(t,n,i){let e=60/(i.N||120)/4;for(let o of i.L)for(let i=0;i<o.Y.length;i++)o.Y[i]&&O(t,n,o.X,o.Y[i],i*e)}(t.Audio,e.I,e.g)}e.p=e.g,e.A=0,e.I&&I(e.I,o)}e.g=e.j}function I(t,n){T(vn,n.i),D(_n,n.i),t.positionX?(t.positionX.value=vn[0],t.positionY.value=vn[1],t.positionZ.value=vn[2],t.orientationX.value=_n[0],t.orientationY.value=_n[1],t.orientationZ.value=_n[2]):(t.setPosition(...vn),t.setOrientation(..._n))}function G(t,n=[.9,.9,.9,1],i=16640){return(e,o)=>{e.i.o[o]|=8,e.i.B[o]={G:0,V:t,U:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],W:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H:[0,0,0],q:n,J:t.Z,tt:n,nt:i}}}function K(t,n,i){let e=t.i._[n],o=i.V;var r,l;(r=i.U)[0]=(l=e.it)[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r[4]=l[4],r[5]=l[5],r[6]=l[6],r[7]=l[7],r[8]=l[8],r[9]=l[9],r[10]=l[10],r[11]=l[11],r[12]=l[12],r[13]=l[13],r[14]=l[14],r[15]=l[15],C(i.W,o.V,i.U),T(i.H,e.i)}function N(t,n){let i,e,o,r,l,s;T(n.et,t),i=r=n.et[0],e=l=n.et[1],o=s=n.et[2];let c=[0,0,0];for(let a=0;a<8;a++){let f=gn[a];c[0]=f[0]*n.ot[0],c[1]=f[1]*n.ot[1],c[2]=f[2]*n.ot[2],v(c,c,t),c[0]<i&&(i=c[0]),c[0]>r&&(r=c[0]),c[1]<e&&(e=c[1]),c[1]>l&&(l=c[1]),c[2]<o&&(o=c[2]),c[2]>s&&(s=c[2])}n.rt=[i,e,o],n.lt=[r,l,s],n.st[0]=(r-i)/2,n.st[1]=(l-e)/2,n.st[2]=(s-o)/2}function L(t,n){let i=t.et[0]-n.et[0],e=t.st[0]+n.st[0]-Math.abs(i),o=t.et[1]-n.et[1],r=t.st[1]+n.st[1]-Math.abs(o),l=t.et[2]-n.et[2],s=t.st[2]+n.st[2]-Math.abs(l);return e<r&&e<s?[e*Math.sign(i),0,0]:r<s?[0,r*Math.sign(o),0]:[0,0,s*Math.sign(l)]}function Y(t,n,i){for(let r=0;r<i;r++){let i=n[r],l=t.ct&i.ft,s=i.ct&t.ft;if((l||s)&&(e=t).rt[0]<(o=i).lt[0]&&e.lt[0]>o.rt[0]&&e.rt[1]<o.lt[1]&&e.lt[1]>o.rt[1]&&e.rt[2]<o.lt[2]&&e.lt[2]>o.rt[2]){let n=L(t,i);l&&t.ut.push({ht:i.dt,vt:n}),s&&i.ut.push({ht:t.dt,vt:h([0,0,0],n)})}}var e,o}function X(t,n){let i=t.i._t[n],e=t.i.gt[n];i.Mt&&f(e.Mt,e.Mt,i.Mt),i.$&&M(e.wt,e.wt,i.$)}function j(t,n){let e=t.i.yt[n];if(t.i.At[n].bt&&t.kt.Space&&!e.Ct){e.Et[1]+=300;for(let e of i(t.i,n,1))t.i.m[e].g="jump"}}function B(t,n){let i=t.i.At[n];if(i.xt){let i=t.i.gt[n];t.kt.ArrowLeft&&M(i.wt,i.wt,[0,1,0,0]),t.kt.ArrowRight&&M(i.wt,i.wt,[0,-1,0,0])}if(i.Dt){let e=t.i.gt[n],o=w(t.i._[n].$);t.kt.ArrowUp&&o>i.Tt&&M(e.Ft,e.Ft,[-1,0,0,0]),t.kt.ArrowDown&&o<i.$t&&M(e.Ft,e.Ft,[1,0,0,0])}}function V(t,n){let i=t.i._[n],e=t.i.At[n];if(e.xt&&t.Pt.Touch1X&&(y(kn,yn,-t.Pt.Touch1X*e.xt*10*rn),M(i.$,kn,i.$),t.i.o[n]|=256),e.Dt&&t.Pt.Touch1Y){let o=w(i.$),r=s(e.Tt-o,e.$t-o,t.Pt.Touch1Y*e.Dt*10);y(kn,bn,r*rn),M(i.$,i.$,kn),t.i.o[n]|=256}}function U(t,n){let i=t.i.At[n];if(i.xt&&Math.abs(t.Pt.pad0_axis_3)>.1){let i=t.i.gt[n];M(i.wt,i.wt,y([0,0,0,1],Cn,-t.Pt.pad0_axis_3*Math.PI))}if(i.Dt&&Math.abs(t.Pt.pad0_axis_4)>.1){let e=t.i.gt[n],o=t.Pt.pad0_axis_4*Math.PI,r=w(t.i._[n].$);(o<0&&r>i.Tt||o>0&&r<i.$t)&&M(e.Ft,e.Ft,y([0,0,0,1],En,o))}}function W(t,n,i,e=0,o=0,r=[1,1,1],l=2304){return(s,c)=>{s.i.o[c]|=65536,s.i.St[c]={G:1,Ot:t,Rt:n,zt:i[3]<1?1:0,It:l,Gt:i,Kt:[...r,e],Nt:[i[0],i[1],i[2],o]}}}function H(t=[0,0,0],n=[0,0,0,1],i=[1,1,1]){return(e,o)=>{e.i.o[o]|=4194560,e.i._[o]={i:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],it:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F:t,$:n,P:i,Gyroscope:!1}}}function q(t,n){t.Lt.textAlign="center",t.Lt.font=n.Yt,t.Lt.fillStyle=n.Xt,t.Lt.fillText(n.Text,0,0)}function J(t,n){t.Lt.strokeStyle=n.jt,t.Lt.strokeRect(-n.ot/2,-n.ot/2,n.ot,n.ot)}function Q(t,n,i){let r=t.i.Bt[n];r.Vt-=i,r.Vt<0&&(r.Ut&&o(t,r.Ut,n),e(t.i,n))}function Z(t,n,i){let e=t.i.Wt[n],o=t.i._[n];2===e.G?D(Tn,o.i):T(Tn,o.i),t.Ht[4*i+0]=Tn[0],t.Ht[4*i+1]=Tn[1],t.Ht[4*i+2]=Tn[2],t.Ht[4*i+3]=e.G,t.qt[4*i+0]=e.jt[0],t.qt[4*i+1]=e.jt[1],t.qt[4*i+2]=e.jt[2],t.qt[4*i+3]=e.Jt}function tt(t,n,i){let e=t.i._[n],o=t.i.gt[n];if(0!==o.Mt[0]||0!==o.Mt[1]||0!==o.Mt[2]){let l=Math.min(1,Math.hypot((r=o.Mt)[0],r[1],r[2]));_(o.Mt,o.Mt,e.i),void 0!==e.Qt&&_(o.Mt,o.Mt,t.i._[e.Qt].it),d(o.Mt,o.Mt),u(o.Mt,o.Mt,l*o.Zt*i),f(e.F,e.F,o.Mt),t.i.o[n]|=256,c(o.Mt,0,0,0)}var r;o.wt[3]<1&&(b(o.wt,Pn,o.wt,Math.min(1,o.tn/Math.PI*i)),M(e.$,o.wt,e.$),t.i.o[n]|=256,g(o.wt,0,0,0,1)),o.Ft[3]<1&&(b(o.Ft,Pn,o.Ft,Math.min(1,o.tn/Math.PI*i)),M(e.$,e.$,o.Ft),t.i.o[n]|=256,g(o.Ft,0,0,0,1))}function nt(t,n,i){let e=t.i.nn[n],o=t.i._[n];e.en+=i,e.en>e.on&&(e.en=0,T(On,o.i),D(Rn,o.i),e.rn.push(...On,0),e.rn.push(...Rn,Math.random()));for(let t=0;t<e.rn.length;)e.rn[t+3]+=i,e.rn[t+3]>e.Bt?e.rn.splice(t,8):t+=8}function it(t,n=.5){return(i,e)=>{i.i.o[e]|=131072,i.i.yt[e]={G:t,ln:e,sn:n,Et:[0,0,0],cn:[0,0,0],an:[0,0,0],fn:[0,0,0],Ct:!1}}}function et(t,n,i){let e=t.i._[n],o=t.i.yt[n];if(1===o.G){a(o.cn,o.an),u(o.Et,o.Et,i),f(o.cn,o.cn,o.Et),o.cn[1]+=-9.81*i;let r=[0,0,0];u(r,o.cn,i),f(e.F,e.F,r),t.i.o[n]|=256,c(o.Et,0,0,0)}}function ot(t,n,i){let e=t.i.yt[n];var o,r,l;T(Gn,t.i._[n].i),2===e.G&&((o=Kn)[0]=(r=Gn)[0]-(l=e.fn)[0],o[1]=r[1]-l[1],o[2]=r[2]-l[2],u(e.cn,Kn,1/i)),a(e.fn,Gn)}function rt(t,n){let i=t.i._[n],e=t.i.yt[n],o=t.i.un[e.ln];if(1===e.G){e.Ct=!0;let s=!1;for(let c=0;c<o.ut.length;c++){let h=o.ut[c];if(131072&t.i.o[h.ht]){s=!0,f(i.F,i.F,h.vt),t.i.o[n]|=256;let o=t.i.yt[h.ht];switch(o.G){case 0:d(Ln,h.vt),u(Ln,Ln,-2*((r=e.cn)[0]*(l=Ln)[0]+r[1]*l[1]+r[2]*l[2])),f(e.an,e.cn,Ln);break;case 1:case 2:a(e.an,o.cn)}u(e.an,e.an,e.sn),h.vt[1]>0&&e.an[1]<1&&(e.an[1]=0,e.Ct=!1)}}s||a(e.an,e.cn)}else 2===e.G&&a(e.an,e.cn);var r,l}function lt(t,n){if(16&t.o[n]){let i=t.l[n];for(let n of i.l)if(1048576&t.o[n])return!0}return!1}function st(t,n,i,e){return t.bindTexture(jt,n),t.texImage2D(jt,0,34836,i,e,0,Nt,5126,null),t.texParameteri(jt,Xt,9728),t.texParameteri(jt,Yt,9728),n}function ct(t,n,i,e){return t.bindTexture(jt,n),t.texImage2D(jt,0,33190,i,e,0,6402,5125,null),t.texParameteri(jt,Xt,Lt),t.texParameteri(jt,Yt,Lt),t.texParameteri(jt,34892,34894),t.texParameteri(jt,10242,33071),t.texParameteri(jt,10243,33071),n}function at(t,n,i,e){n.hn=i,n.dn=e,function(t,n,i,e){t.bindTexture(jt,n),t.texImage2D(jt,0,32856,i,e,0,Nt,5121,null),t.texParameteri(jt,Xt,Lt),t.texParameteri(jt,Yt,Lt)}(t,n.vn,n.hn,n.dn),ct(t,n._n,n.hn,n.dn)}function ft(t,n,i,e){n.hn=i,n.dn=e,function(t,n,i,e){t.bindTexture(jt,n),t.texImage2D(jt,0,34842,i,e,0,Nt,5126,null),t.texParameteri(jt,Xt,Lt),t.texParameteri(jt,Yt,Lt)}(t,n.vn,n.hn,n.dn),ct(t,n._n,n.hn,n.dn)}function ut(t,n,i,e){n.hn=i,n.dn=e,st(t,n.mn,n.hn,n.dn),st(t,n.gn,n.hn,n.dn),st(t,n.Mn,n.hn,n.dn),st(t,n.pn,n.hn,n.dn),ct(t,n._n,n.hn,n.dn)}function ht(t,n,i){let e=null,o=null,r=[];for(let l=0;l<t.i.o.length;l++)if((t.i.o[l]&Xn)===Xn){let s=t.i.St[l];if(1===s.zt){r.push(l);continue}s.Ot!==e&&(e=s.Ot,dt(t,s,n)),s.It!==o&&(o=s.It,t.wn.frontFace(s.It)),vt(t,l,i)}r.sort(((i,e)=>{let o=t.i._[i];return $(t.i._[e].i,n.H)-$(o.i,n.H)})),t.wn.enable(3042);for(let l=0;l<r.length;l++){let s=r[l],c=t.i.St[s];c.Ot!==e&&(e=c.Ot,dt(t,c,n)),c.It!==o&&(o=c.It,t.wn.frontFace(c.It)),vt(t,s,i)}t.wn.disable(3042)}function dt(t,n,i){switch(n.G){case 0:case 4:case 7:case 8:case 9:t.wn.useProgram(n.Ot.yn),t.wn.uniformMatrix4fv(n.Ot.bn.W,!1,i.W);break;case 1:case 5:case 6:t.wn.useProgram(n.Ot.yn),t.wn.uniformMatrix4fv(n.Ot.bn.W,!1,i.W),t.wn.uniform3fv(n.Ot.bn.An,i.H),t.wn.uniform4fv(n.Ot.bn.Ht,t.Ht),t.wn.uniform4fv(n.Ot.bn.qt,t.qt);break;case 2:t.wn.useProgram(n.Ot.yn),t.wn.uniformMatrix4fv(n.Ot.bn.W,!1,i.W),t.wn.uniform3fv(n.Ot.bn.An,i.H),t.wn.uniform4fv(n.Ot.bn.Ht,t.Ht),t.wn.uniform4fv(n.Ot.bn.qt,t.qt),t.wn.activeTexture(Bt),t.wn.bindTexture(jt,t.Cn.kn._n),t.wn.uniform1i(n.Ot.bn.En,0);let e=function(t,n,i=0){for(let e=i;e<t.o.length;e++)if((t.o[e]&n)===n)return e}(t.i,4104);if(e){let i=t.i.B[e];if(2===i.G)throw Error("XR cameras cannot be shadow sources.");t.wn.uniformMatrix4fv(n.Ot.bn.xn,!1,i.W)}}}function vt(t,n,i){let e=t.i._[n],o=t.i.St[n];switch(o.G){case 0:t.wn.uniformMatrix4fv(o.Ot.bn.i,!1,e.i),t.wn.uniform4fv(o.Ot.bn.jt,o.jt),t.wn.bindVertexArray(o.Rt.Dn),t.wn.drawElements(o.Ot.Tn,o.Rt.Fn,Vt,0),t.wn.bindVertexArray(null);break;case 1:case 2:t.wn.uniformMatrix4fv(o.Ot.bn.i,!1,e.i),t.wn.uniformMatrix4fv(o.Ot.bn.it,!1,e.it),t.wn.uniform4fv(o.Ot.bn.Gt,o.Gt),t.wn.uniform4fv(o.Ot.bn.Kt,o.Kt),t.wn.uniform4fv(o.Ot.bn.Nt,o.Nt),t.wn.bindVertexArray(o.Rt.Dn),t.wn.drawElements(o.Ot.Tn,o.Rt.Fn,Vt,0),t.wn.bindVertexArray(null);break;case 4:if(o.$n===i)break;t.wn.uniformMatrix4fv(o.Ot.bn.i,!1,e.i),t.wn.uniform4fv(o.Ot.bn.jt,o.jt),t.wn.activeTexture(Bt),t.wn.bindTexture(jt,o.$n),t.wn.uniform1i(o.Ot.bn.Pn,0),t.wn.bindVertexArray(o.Rt.Dn),t.wn.drawElements(o.Ot.Tn,o.Rt.Fn,Vt,0),t.wn.bindVertexArray(null);break;case 5:if(o.$n===i)break;t.wn.uniformMatrix4fv(o.Ot.bn.i,!1,e.i),t.wn.uniformMatrix4fv(o.Ot.bn.it,!1,e.it),t.wn.uniform4fv(o.Ot.bn.Gt,o.Gt),t.wn.uniform4fv(o.Ot.bn.Kt,o.Kt),t.wn.uniform4fv(o.Ot.bn.Nt,o.Nt),t.wn.activeTexture(Bt),t.wn.bindTexture(jt,o.$n),t.wn.uniform1i(o.Ot.bn.Sn,0),t.wn.bindVertexArray(o.Rt.Dn),t.wn.drawElements(o.Ot.Tn,o.Rt.Fn,Vt,0),t.wn.bindVertexArray(null);break;case 6:if(o.Sn===i)break;t.wn.uniformMatrix4fv(o.Ot.bn.i,!1,e.i),t.wn.uniformMatrix4fv(o.Ot.bn.it,!1,e.it),t.wn.uniform4fv(o.Ot.bn.Gt,o.Gt),t.wn.activeTexture(33985),t.wn.bindTexture(jt,o.Sn),t.wn.uniform1i(o.Ot.bn.Sn,1),t.wn.activeTexture(33986),t.wn.bindTexture(jt,o.On),t.wn.uniform1i(o.Ot.bn.On,2),t.wn.activeTexture(33987),t.wn.bindTexture(jt,o.Rn),t.wn.uniform1i(o.Ot.bn.Rn,3),t.wn.bindVertexArray(o.Rt.Dn),t.wn.drawElements(o.Ot.Tn,o.Rt.Fn,Vt,0),t.wn.bindVertexArray(null);break;case 7:t.wn.uniformMatrix4fv(o.Ot.bn.i,!1,e.i),t.wn.uniform4fv(o.Ot.bn.jt,o.jt),t.wn.bindBuffer(Kt,o.zn),t.wn.enableVertexAttribArray(0),t.wn.vertexAttribPointer(0,3,Ut,!1,0,0),t.wn.drawArrays(o.Ot.Tn,0,o.Fn);break;case 8:{let i=t.i.nn[n];t.wn.uniform4fv(o.Ot.bn.In,o.In),t.wn.uniform4fv(o.Ot.bn.Gn,o.Gn),t.wn.uniform4f(o.Ot.bn.Kn,i.Bt,i.Nn,...o.ot);let e=Float32Array.from(i.rn);t.wn.bindBuffer(Kt,o.K),t.wn.bufferSubData(Kt,0,e),t.wn.enableVertexAttribArray(o.Ot.bn.Ln),t.wn.vertexAttribPointer(o.Ot.bn.Ln,4,Ut,!1,32,0),t.wn.enableVertexAttribArray(o.Ot.bn.Mt),t.wn.vertexAttribPointer(o.Ot.bn.Mt,3,Ut,!1,32,16),t.wn.drawArrays(o.Ot.Tn,0,i.rn.length/8);break}}}function _t(t,n){switch(t.G){case 0:!function(t,n){(function(t,n,i,e,o){let r,l=1/Math.tan(n/2);t[0]=l/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(r=1/(e-o),t[10]=(o+e)*r,t[14]=2*o*e*r):(t[10]=-1,t[14]=-2*e)})(t.V,n>1?t.Yn:t.Yn/n,n,t.Xn,t.Z),k(t.jn,t.V)}(t,n);break;case 1:!function(t,n){n>1?x(t.V,t.Bn/n,t.Bn,-t.Bn/n,-t.Bn,t.Xn,t.Z):x(t.V,t.Bn,t.Bn*n,-t.Bn,-t.Bn*n,t.Xn,t.Z),k(t.jn,t.V)}(t,n)}}function mt(t,n){let i=t.i.Vn[n],e=t.i._[n];e.F=[Math.random()-.5,Math.random()-.5,Math.random()-.5],u(e.F,e.F,2*i.Un),t.i.o[n]|=256}function gt(n,i,e){let o=n.i.Wn[i];if(o.en+=e,o.en>o.Hn){o.en=0;let e=n.i._[i],r=[0,0,0];T(r,e.i);let l=[0,0,0,0];F(l,e.i),t(n,[...o.qn(n),H(r,l)])}}function Mt(t,n,i){let e=t.i.Jn[n];e.en+=i,e.en>e.on&&(e.en=0,e.Qn?(e.Qn=!1,t.i.o[n]&=~e.ct):(e.Qn=!0,t.i.o[n]|=e.ct))}function pt(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Un)===Un&&wt(t.i,n,t.i._[n])}function wt(t,n,i){if(t.o[n]&=-257,E(i.i,i.$,i.F,i.P),void 0!==i.Qt&&(C(i.i,t._[i.Qt].i,i.i),i.Gyroscope&&(T(Wn,i.i),E(i.i,i.$,Wn,i.P))),k(i.it,i.i),16&t.o[n]){let i=t.l[n];for(let e=0;e<i.l.length;e++){let o=i.l[e];if(4194304&t.o[o]){let i=t._[o];i.Qt=n,wt(t,o,i)}}}}function yt(t,n){let i=t.i.un[n],e=t.i.g[n];for(let r of i.ut)e.ct&t.i.un[r.ht].ft&&o(t,e.Ut,[n,r.ht])}function bt(t,...n){return t.reduce(((t,i)=>t+function(t){let n=t.shift();return"boolean"==typeof n||null==n?"":Array.isArray(n)?n.join(""):n}(n)+i))}function At(t,n=.1){return(i,e)=>{i.i.o[e]|=8192,i.i.Zn[e]={ti:t,ni:n}}}function kt(t,n,i=0){for(let e=i;e<t.o.length;e++)if(32768&t.o[e]&&t.ei[e].ii===n)return e;throw`No entity named ${n}.`}function Ct(t){return[At(kt(t.i,"camera anchor")),n([H([0,1,-6],[0,1,0,0]),G({G:0,Yn:1,Xn:.1,Z:1e3,V:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],jn:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},[.1,.5,.8,1])])]}function Et(t,n,i,e=[1,1,1]){return(o,r)=>{o.i.o[r]|=32,o.i.un[r]={dt:r,oi:!0,ri:t,ft:n,ct:i,ot:e,rt:[0,0,0],lt:[0,0,0],et:[0,0,0],st:[0,0,0],ut:[]}}}function xt(t){return[Et(!1,2,0),it(0),n([H([0,S(0,.1),0]),W(t.li,t.si,[0,1,.1,1])])]}function Dt(t){return t*t}function Tt(t){return 1-(1-t)**2}function Ft(t){return t<.5?2*t*t:1-(-2*t+2)**2/2}function $t(t,n,i,e=0,o=0){return(r,l)=>{r.i.o[l]|=128,r.i.At[l]={bt:t,xt:n,Dt:i,Tt:e,$t:o}}}function Pt(t=[1,1,1],n=1){return(i,e)=>{i.i.o[e]|=4096,i.i.Wt[e]={G:2,jt:t,Jt:n}}}function St(t=[1,1,1],n=1){return(i,e)=>{i.i.o[e]|=4096,i.i.Wt[e]={G:3,jt:t,Jt:n}}}function Ot(t,n){return(i,e)=>{i.i.o[e]|=16384,i.i.gt[e]={Zt:t,tn:n,Mt:[0,0,0],wt:[0,0,0,1],Ft:[0,0,0,1]}}}function Rt(t){return[$t(!0,.2,0),(e=[0,0,1],(t,n)=>{t.i.o[n]|=64,t.i._t[n]={Mt:e,$:null}}),Ot(20,3),Et(!0,1,2),it(1),(t,n)=>{t.i.o[n]|=4,t.i.O[n]={I:undefined,j:void 0,A:0}},(t,n)=>{t.i.o[n]|=2},n([H(),W(t.li,t.si,[1,.3,.2,1]),(i={idle:{C:[{D:0,$:p([0,0,0,1],0,-5,0),T:Ft},{D:1,$:p([0,0,0,1],0,5,0),T:Ft}]},jump:{C:[{D:0,$:[0,0,0,1]},{D:.5,$:[1,0,0,0],T:Dt},{D:1,$:[0,0,0,-1],T:Tt}],k:0}},(t,n)=>{let e={};for(let t in i){let{C:n,k:o=ln.Default}=i[t],r=n[n.length-1].D;e[t]={C:n.map((t=>({...t}))),k:o,S:r,A:0}}t.i.o[n]|=1,t.i.m[n]={M:e,p:e.idle}})],[H(void 0,p([0,0,0,1],15,0,0)),(t,n)=>{t.i.o[n]|=32768,t.i.ei[n]={ii:"camera anchor"}},Ot(0,3),$t(!1,0,.2,-10,30)],[H([0,2,0]),St([1,1,1],5)])];var i,e}var zt,It,Gt=35044,Kt=34962,Nt=6408,Lt=9729,Yt=10240,Xt=10241,jt=3553,Bt=33984,Vt=5123,Ut=5126,Wt=document.getElementById("update"),Ht=document.getElementById("delta"),qt=document.getElementById("fps"),Jt=1/60,Qt=class extends class{constructor(t=1e4){this.o=[],this.ci=[],this.ai=t}t(){return this.ci.length>0?this.ci.pop():this.o.push(0)-1}u(t){this.o[t]=0,this.ci.push(t)}}{constructor(){super(...arguments),this.m=[],this.O=[],this.B=[],this.l=[],this.un=[],this._t=[],this.At=[],this.fi=[],this.nn=[],this.Bt=[],this.Wt=[],this.Zn=[],this.gt=[],this.ei=[],this.St=[],this.yt=[],this.Vn=[],this.Wn=[],this.ui=[],this.Jn=[],this._=[],this.g=[]}},Zt=Float32Array.from([-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),tn=Float32Array.from([-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0]),nn=Float32Array.from([.666667,.333333,.333333,.333333,.333333,0,.666667,0,.333333,.666667,0,.666667,0,.333333,.333333,.333333,.333333,.333333,0,.333333,0,0,.333333,0,.333333,.666667,.333333,.333333,.666667,.333333,.666667,.666667,1,.333333,.666667,.333333,.666667,0,1,0,.333333,.666667,.333333,1,0,1,0,.666667]),en=Float32Array.from([]),on=Uint16Array.from([23,22,20,22,21,20,19,18,16,18,17,16,15,14,12,14,13,12,11,10,8,10,9,8,7,6,4,6,5,4,3,2,0,2,1,0]),rn=Math.PI/180,ln=(t=>(t[t.None=0]="None",t[t.EarlyExit=1]="EarlyExit",t[t.Loop=2]="Loop",t[t.Alternate=4]="Alternate",t[t.Default=7]="Default",t))(ln||{}),sn=4194305,cn=4194306,an=[0,0,0],fn=[0,0,0],un=[0,0,0],hn=1,dn=4194308,vn=[0,0,0],_n=[0,0,0],mn=4194312,gn=[[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[-.5,-.5,.5]],Mn=4194336,pn=4210752,wn=131200,yn=[0,1,0],bn=[1,0,0],An=[0,0],kn=[0,0,0,0],Cn=[0,1,0],En=[1,0,0],xn=4194816,Dn=4198400,Tn=[0,0,0],Fn=4202496,$n=4210688,Pn=[0,0,0,1],Sn=4195328,On=[0,0,0],Rn=[0,0,0],zn=4325376,In=4325376,Gn=[0,0,0],Kn=[0,0,0],Nn=4325408,Ln=[0,0,0],Yn=1048576,Xn=4259840,jn=4456448,Bn=4718592,Vn=2097152,Un=4194560,Wn=[0,0,0],Hn=12582944,qn=new class extends class extends class{constructor(){this.hi=0,this.di=0,this.vi=window.innerWidth,this._i=window.innerHeight,this.mi=!0,this.kt={MouseX:0,MouseY:0},this.Pt={MouseX:0,MouseY:0},this.gi={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.Mi={},this.pi=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.wi():this.yi())),this.pi.addEventListener("contextmenu",(t=>t.preventDefault())),this.pi.addEventListener("mousedown",(t=>{this.kt["Mouse"+t.button]=1,this.Pt["Mouse"+t.button]=1})),this.pi.addEventListener("mouseup",(t=>{this.kt["Mouse"+t.button]=0,this.Pt["Mouse"+t.button]=-1})),this.pi.addEventListener("mousemove",(t=>{this.kt.MouseX=t.clientX,this.kt.MouseY=t.clientY,this.Pt.MouseX=t.movementX,this.Pt.MouseY=t.movementY})),this.pi.addEventListener("wheel",(t=>{t.preventDefault(),this.Pt.WheelY=t.deltaY})),this.pi.addEventListener("touchstart",(t=>{t.target===this.pi&&t.preventDefault(),1===t.touches.length&&(this.Mi={});for(let n=0;n<t.touches.length;n++)this.Mi[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],e=this.Mi[i.identifier];this.kt["Touch"+e]=1,this.kt[`Touch${e}X`]=i.clientX,this.kt[`Touch${e}Y`]=i.clientY,this.Pt["Touch"+e]=1,this.Pt[`Touch${e}X`]=0,this.Pt[`Touch${e}Y`]=0}})),this.pi.addEventListener("touchmove",(t=>{t.target===this.pi&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],e=this.Mi[i.identifier];this.Pt[`Touch${e}X`]=i.clientX-this.kt[`Touch${e}X`],this.Pt[`Touch${e}Y`]=i.clientY-this.kt[`Touch${e}Y`],this.kt[`Touch${e}X`]=i.clientX,this.kt[`Touch${e}Y`]=i.clientY}})),this.pi.addEventListener("touchend",(t=>{t.target===this.pi&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=this.Mi[t.changedTouches[n].identifier];this.kt["Touch"+i]=0,this.Pt["Touch"+i]=-1}})),this.pi.addEventListener("touchcancel",(t=>{for(let n=0;n<t.changedTouches.length;n++){let i=this.Mi[t.changedTouches[n].identifier];this.kt["Touch"+i]=0,this.Pt["Touch"+i]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.kt[t.code]=1,this.Pt[t.code]=1)})),window.addEventListener("keyup",(t=>{this.kt[t.code]=0,this.Pt[t.code]=-1}))}yi(){let t=0,n=performance.now(),i=e=>{let o=(e-n)/1e3;for(n=e,this.hi=requestAnimationFrame(i),this.bi(o),t+=o;t>=Jt;)t-=Jt,this.Ai(Jt);this.ki(o),this.Ci(o)};this.wi(),i(n)}wi(){cancelAnimationFrame(this.hi),this.hi=0}bi(t){this.di=performance.now();let n=Math.abs(this.Pt.MouseX)+Math.abs(this.Pt.MouseY);this.gi.Mouse+=n,1===this.kt.Mouse0&&(this.gi.Mouse0+=n),1===this.kt.Mouse1&&(this.gi.Mouse1+=n),1===this.kt.Mouse2&&(this.gi.Mouse2+=n),1===this.kt.Touch0&&(this.gi.Touch0+=Math.abs(this.Pt.Touch0X)+Math.abs(this.Pt.Touch0Y)),1===this.kt.Touch1&&(this.gi.Touch1+=Math.abs(this.Pt.Touch1X)+Math.abs(this.Pt.Touch1Y))}Ai(t){}ki(t){}Ci(t){this.mi=!1,-1===this.Pt.Mouse0&&(this.gi.Mouse0=0),-1===this.Pt.Mouse1&&(this.gi.Mouse1=0),-1===this.Pt.Mouse2&&(this.gi.Mouse2=0),-1===this.Pt.Touch0&&(this.gi.Touch0=0),-1===this.Pt.Touch1&&(this.gi.Touch1=0);for(let t in this.Pt)this.Pt[t]=0;let n=performance.now()-this.di;Wt&&(Wt.textContent=n.toFixed(1)),Ht&&(Ht.textContent=(1e3*t).toFixed(1)),qt&&(qt.textContent=(1/t).toFixed())}}{constructor(){super(),this.Ei=document.querySelector("#billboard"),this.Lt=this.Ei.getContext("2d"),this.xi=document.querySelector("#scene"),this.wn=this.xi.getContext("webgl2"),this.Audio=new AudioContext,this.Di=[],this.Cn={},this.wn.enable(2929),this.wn.enable(2884),this.wn.blendFunc(770,771)}bi(t){super.bi(t),this.Di=[]}}{constructor(){super(...arguments),this.i=new Qt,this.Ti=function(t,n=4){let i=r(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\n\nlayout(location=0) in vec4 attr_position;\n\nvoid main() {\ngl_Position = pv * world * attr_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform vec4 color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = color;\n}\n");return{Tn:n,yn:i,bn:{W:t.getUniformLocation(i,"pv"),i:t.getUniformLocation(i,"world"),jt:t.getUniformLocation(i,"color")}}}(this.wn,2),this.li=function(t){let n=r(t,"#version 300 es\n\nuniform mat4 pv;\nuniform mat4 world;\nuniform mat4 self;\n\nlayout(location=0) in vec4 attr_position;\nlayout(location=1) in vec3 attr_normal;\n\nout vec4 vert_position;\nout vec3 vert_normal;\n\nvoid main() {\nvert_position = world * attr_position;\nvert_normal = (vec4(attr_normal, 0.0) * self).xyz;\ngl_Position = pv * vert_position;\n}\n","#version 300 es\n\nprecision mediump float;\n\nuniform vec3 eye;\nuniform vec4 diffuse_color;\nuniform vec4 specular_color;\nuniform vec4 emissive_color;\nuniform vec4 light_positions[8];\nuniform vec4 light_details[8];\n\nin vec4 vert_position;\nin vec3 vert_normal;\n\nout vec4 frag_color;\n\n\n\n\n\n\nvec3 GAMMA_DECODE(vec3 rgb) {\nreturn pow(rgb, vec3(2.2));\n}\n\n\nvec4 GAMMA_DECODE(vec4 color) {\nreturn vec4(pow(color.rgb, vec3(2.2)), color.a);\n}\n\n\n\n\n\n\nvec3 GAMMA_ENCODE(vec3 rgb) {\nreturn pow(rgb, vec3(1.0 / 2.2));\n}\n\n\nvec4 GAMMA_ENCODE(vec4 color) {\nreturn vec4(pow(color.rgb, vec3(1.0 / 2.2)), color.a);\n}\n\n\nvoid main() {\nvec3 world_normal = normalize(vert_normal);\n\nvec3 view_dir = eye - vert_position.xyz;\nvec3 view_normal = normalize(view_dir);\n\n\nvec3 light_acc = GAMMA_DECODE(diffuse_color.rgb) * 0.1;\n\nfor (int i = 0; i < 8; i++) {\nint light_kind = int(light_positions[i].w);\nif (light_kind == 0) {\nbreak;\n}\n\nvec3 light_rgb = GAMMA_DECODE(light_details[i].rgb);\nfloat light_intensity = light_details[i].a;\n\nvec3 light_normal;\nif (light_kind == 2) {\nlight_normal = light_positions[i].xyz;\n} else if (light_kind == 3) {\nvec3 light_dir = light_positions[i].xyz - vert_position.xyz;\nfloat light_dist = length(light_dir);\nlight_normal = light_dir / light_dist;\n\nlight_intensity /= (light_dist * light_dist);\n}\n\nfloat diffuse_factor = dot(world_normal, light_normal);\nif (diffuse_factor > 0.0) {\n\nlight_acc += GAMMA_DECODE(diffuse_color.rgb) * diffuse_factor * light_rgb * light_intensity;\n\nif (specular_color.a > 0.0) {\n\n\n\n\n\n\nvec3 h = normalize(light_normal + view_normal);\nfloat specular_angle = max(dot(h, world_normal), 0.0);\nfloat specular_factor = pow(specular_angle, specular_color.a);\n\n\nlight_acc += GAMMA_DECODE(specular_color.rgb) * specular_factor * light_rgb * light_intensity;\n}\n}\n}\n\nvec3 emissive_rgb = GAMMA_DECODE(emissive_color.rgb) * emissive_color.a;\nfrag_color = vec4(GAMMA_ENCODE(light_acc + emissive_rgb), diffuse_color.a);\n}\n");return{Tn:4,yn:n,bn:{W:t.getUniformLocation(n,"pv"),i:t.getUniformLocation(n,"world"),it:t.getUniformLocation(n,"self"),Gt:t.getUniformLocation(n,"diffuse_color"),Kt:t.getUniformLocation(n,"specular_color"),Nt:t.getUniformLocation(n,"emissive_color"),An:t.getUniformLocation(n,"eye"),Ht:t.getUniformLocation(n,"light_positions"),qt:t.getUniformLocation(n,"light_details")}}}(this.wn),this.Fi=function(t){let n=r(t,"#version 300 es\n\nuniform mat4 pv;\nuniform vec4 color_start;\nuniform vec4 color_end;\n\nuniform vec4 details;\n\n\nin vec4 attr_origin_age;\nin vec3 attr_direction;\n\nout vec4 vert_color;\n\nvoid main() {\n\nvec3 velocity = attr_direction * details.y;\ngl_Position = pv * vec4(attr_origin_age.xyz + velocity * attr_origin_age.w, 1.0);\n\n\nfloat t = attr_origin_age.w / details.x;\ngl_PointSize = mix(details.z, details.w, t);\nvert_color = mix(color_start, color_end, t);\n}\n","#version 300 es\n\nprecision mediump float;\n\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color;\n}\n");return{Tn:0,yn:n,bn:{W:t.getUniformLocation(n,"pv"),In:t.getUniformLocation(n,"color_start"),Gn:t.getUniformLocation(n,"color_end"),Kn:t.getUniformLocation(n,"details"),Ln:t.getAttribLocation(n,"attr_origin_age"),Mt:t.getAttribLocation(n,"attr_direction")}}}(this.wn),this.si=function(t){let n=t.createVertexArray();t.bindVertexArray(n);let i=t.createBuffer();t.bindBuffer(Kt,i),t.bufferData(Kt,Zt,Gt),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,Ut,!1,0,0);let e=t.createBuffer();t.bindBuffer(Kt,e),t.bufferData(Kt,tn,Gt),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,3,Ut,!1,0,0);let o=t.createBuffer();t.bindBuffer(Kt,o),t.bufferData(Kt,nn,Gt),t.enableVertexAttribArray(2),t.vertexAttribPointer(2,2,Ut,!1,0,0);let r=t.createBuffer();t.bindBuffer(Kt,r),t.bufferData(Kt,en,Gt),t.enableVertexAttribArray(5),t.vertexAttribPointer(5,4,Ut,!1,0,0);let l=t.createBuffer();return t.bindBuffer(34963,l),t.bufferData(34963,on,Gt),t.bindVertexArray(null),{Dn:n,zn:i,$i:Zt,Pi:e,Si:tn,Oi:o,Ri:nn,zi:r,Ii:en,Gi:l,Ki:on,Fn:on.length}}(this.wn),this.Ht=new Float32Array(32),this.qt=new Float32Array(32),this.h=0,this.v=0}Ai(t){!function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&zn)===zn&&et(t,i,n)}(this,t),pt(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&In)===In&&ot(t,i,n)}(this,t),function(t,n){let i=[],e=[];for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Mn)===Mn){let o=t.i._[n],r=t.i.un[n];r.ut=[],r.oi?(r.oi=!1,N(o.i,r)):r.ri?(N(o.i,r),e.push(r)):i.push(r)}for(let t=0;t<e.length;t++)Y(e[t],i,i.length),Y(e[t],e,t)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Nn)===Nn&&rt(t,n)}(this),pt(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Hn)===Hn&&yt(t,n)}(this)}ki(t){!function(t,n){let i=[];for(let e=0;e<t.i.o.length;e++)if((t.i.o[e]&Yn)===Yn){if(lt(t.i,e))continue;let o=t.i.ui[e];switch(o.G){case 0:o.Ni(e)&&i.push(e);break;case 1:o.Vt-=n,o.Vt<0&&i.push(e)}}for(let n of i){let i=t.i.ui[n];i.Li&&i.Li(n),t.i.o[n]&=-1048577,0===t.i.o[n]&&t.i.u(n),delete t.i.ui[n]}}(this,t),function(t,n){if(t.vi==window.innerWidth&&t._i==window.innerHeight||(t.mi=!0),t.mi){t.vi=t.xi.width=t.Ei.width=window.innerWidth,t._i=t.xi.height=t.Ei.height=window.innerHeight;for(let n of Object.values(t.Cn))if(n.Yi)switch(n.G){case 0:at(t.wn,n,t.vi,t._i);break;case 1:ft(t.wn,n,t.vi,t._i);break;case 2:ut(t.wn,n,t.vi,t._i)}for(let n=0;n<t.i.o.length;n++)if(8==(8&t.i.o[n])){let i=t.i.B[n];switch(i.G){case 0:_t(i.V,t.vi/t._i);break;case 1:_t(i.V,i.ti.hn/i.ti.dn)}}}}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&mn)===mn){let i=t.i.B[n];switch(i.G){case 0:case 1:K(t,n,i),t.Di.push(n)}}}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)16512==(16512&t.i.o[n])&&B(t,n)}(this),function(t,n){1===t.Pt.Touch0&&(An[0]=t.kt.Touch0X,An[1]=t.kt.Touch0Y);for(let n=0;n<t.i.o.length;n++)16512==(16512&t.i.o[n])&&V(t,n)}(this),function(t,n){for(let n of navigator.getGamepads())n&&(t.Pt[`pad${n.index}_axis_1`]=n.axes[0],t.Pt[`pad${n.index}_axis_2`]=n.axes[1],t.Pt[`pad${n.index}_axis_3`]=n.axes[2],t.Pt[`pad${n.index}_axis_4`]=n.axes[3]);for(let n=0;n<t.i.o.length;n++)16512==(16512&t.i.o[n])&&U(t,n)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&wn)===wn&&j(t,n)}(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&pn)===pn&&X(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&sn)===sn&&A(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&$n)===$n&&tt(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&Fn)===Fn){let i=t.i._[n],e=t.i.Zn[n],o=t.i._[e.ti],r=T([0,0,0],o.i),l=F([0,0,0,0],o.i);m(i.F,i.F,r,e.ni),b(i.$,i.$,l,e.ni),t.i.o[n]|=256}}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)2048==(2048&t.i.o[i])&&Q(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&jn)==jn&&mt(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Vn)==Vn&&Mt(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Bn)==Bn&&gt(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&Sn)==Sn&&nt(t,i,n)}(this,t),pt(this),function(t,n){for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&cn)===cn&&P(t,n)}(this),function(t,n){for(let i=0;i<t.i.o.length;i++)(t.i.o[i]&dn)===dn&&z(t,i,n)}(this,t),function(t,n){t.Ht.fill(0),t.qt.fill(0);let i=0;for(let n=0;n<t.i.o.length;n++)(t.i.o[n]&Dn)===Dn&&Z(t,n,i++)}(this),function(t,n){for(let n of t.Di){let i=t.i.B[n];switch(i.G){case 0:t.wn.bindFramebuffer(36160,null),t.wn.viewport(0,0,t.vi,t._i),t.wn.clearColor(...i.tt),t.wn.clear(i.nt),ht(t,i);break;case 1:0===i.ti.G&&(t.wn.bindFramebuffer(36160,i.ti.Xi),t.wn.viewport(0,0,i.ti.hn,i.ti.dn),t.wn.clearColor(...i.tt),t.wn.clear(i.nt),ht(t,i,i.ti.vn))}}}(this),function(t,n){t.Lt.resetTransform(),t.Lt.clearRect(0,0,t.vi,t._i);let i=[0,0,0],e=t.i.B[t.Di[0]];if(e&&2!==e.G)for(let n=0;n<t.i.o.length;n++)if((t.i.o[n]&xn)==xn){if(T(i,t.i._[n].i),v(i,i,e.W),i[2]<-1||i[2]>1)continue;t.Lt.setTransform(1,0,0,1,.5*(i[0]+1)*t.vi,.5*(1-i[1])*t._i);let o=t.i.fi[n];switch(o.G){case 0:q(t,o);break;case 2:J(t,o)}}}(this),function(t,n){let i=function(t){return bt`<div>${bt`
<div
style="
position: absolute;
top: 1vmin;
left: 1vmin;
background: #000;
color: #fff;
font: 13px Arial;
"
>
<button
onclick="$(${0})"
style="
padding: 1vmin;
background: #000;
color: #fff;
border: none;
"
>
${document.fullscreenElement?"Exit Fullscreen":"Enter Fullscreen"}
</button>
</div>
`} ${function(t){return bt`
<div
style="
position: absolute;
right: 0;
bottom: 0;
left: 0;
height: 10vmin;

display: flex;
justify-content: space-around;
align-items: center;

background: rgba(0, 0, 0, 0.5);
color: #fff;
font: 24px Impact;
font-style: italic;
"
>
<div>Collected: ${t.h}</div>
<div>Missed: ${t.v}</div>
</div>
`}(t)}</div>`}(t);i!==It&&(t.pi.innerHTML=It=i)}(this)}};!function(n){n.i=new Qt,n.mi=!0;for(let i=0;i<100;i++)for(let e=0;e<3;e++)S()>.1&&t(n,[...xt(n),H([5*(e-1.5),0,5*-i],void 0,[5,1,5])]);t(n,[H(void 0,p([0,0,0,1],-30,30,0)),Pt([1,1,1],.1)]),t(n,[...Rt(n),H([0,1,0],[0,1,0,0])]),t(n,[...Ct(n),H([0,1,0],[0,1,0,0])])}(qn),qn.yi(),window.$=o.bind(null,qn),window.game=qn})();
